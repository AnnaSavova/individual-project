<pre>
    <code id="line1"> 1:     set each hospital and resident to be completely free;</code>
    <code id="line2"> 2:     while (some resident r is free) and (r has a nonempty list)</code>
    <code id="line3"> 3:           h := first hospital on r's list</code>
    <code id="line4"> 4:           if h is fully subscribed then</code>
    <code id="line5"> 5:                 r' := worst resident provisionally assigned to h</code>
    <code id="line6"> 6:                 assign r' to be free (clear match)</code>
    <code id="line7"> 7:           provisionally assign r to h</code>
    <code id="line8"> 8:           if h is fully subscribed (after assigning r to h) then</code>
    <code id="line9"> 9:                 s := worst resident provisionally assigned to h</code>
    <code id="line10">10:                for each successor s' of s on h's list</code>
    <code id="line11">11:                      remove s' and h from each other's lists</code>
    <code id="line12">12:      the stable matching consists of all n engagements</code>
</pre>